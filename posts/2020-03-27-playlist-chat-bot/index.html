<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us><head><title>Hello - Playlist Chatbot</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=author content="Hello"><meta name=generator content="Hugo 0.98.0"><link rel=stylesheet href=http://yui.yahooapis.com/pure/0.6.0/pure-min.css><link rel=stylesheet href=http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css><link rel=stylesheet href=http://kevinkle.in/css/tufte.css><link rel=stylesheet href=http://kevinkle.in/css/hugo-tufte.css><link rel=stylesheet href=http://kevinkle.in/css/hugo-tufte-override.css></head><body><div id=layout class=pure-g><article class=pure-u-1><header class=brand><h1>Hello</h1><h2></h2><nav class=menu><ul></ul></nav></header><section><h1 class=content-title><a href=/pages-test/posts/2020-03-27-playlist-chat-bot/>Playlist Chatbot</a></h1></section><section><p>Countless times have I found myself in the situation of receiving a telegram message of following
kind:</p><p><img src=/imgs/playlist-chat-bot/telegram-message.png alt="telegram message">{:class=&ldquo;img-responsive&rdquo;}</p><p>On the one hand I find this immensely exciting:</p><ul><li>A friend takes time to share something with me.</li><li>I take pleasure in exploring music per se.</li><li>Both conjuncted, there is a possibility to bond over music.</li></ul><p>Hence there is a great amount of potential!</p><p>Yet, on the other hand, it&rsquo;s a bit of a mess. As seemingly few people do, I use Google Play
Music/Youtube Music over spotify (it&rsquo;s a long story). Spotify links are sometimes rendered
nicely by Telegram as to indicate artist/song/album information. Sometimes not. Depending on that,
the process of adding a friend&rsquo;s suggestion to a playlist of mine looks as follows:</p><ul><li>? Follow spotify link (leave telegram), retrieve song information.</li><li>Open Google Play Music.</li><li>Query song information.</li><li>Add a search result to playlist.</li><li>Switch back to Telegram to thank dear friend. :)</li></ul><p>My desire was to keep all of the upside while getting rid of all context changes. This could be
achieved by a chatbot. The desired behavior:</p><ul><li>Friend messages chatbot directly with song information in plain text.</li><li>Chatbot queries Google Play Music for songs.</li><li>Chatbot adds highest-ranking result to my playlist.</li><li>Chatbot confirms addition to friend.</li></ul><p><img src=/imgs/playlist-chat-bot/bot-message.png alt="bot message">{:class=&ldquo;img-responsive&rdquo;}</p><p>Implementing such a bot came with fairly low effort as I found both the <a href=https://python-telegram-bot.org/>python telegram bot
api</a> as well as the <a href=https://github.com/simon-weber/gmusicapi>gmusicapi</a> very user-friendly. Deploying the bot locally with a
polling mechanism has also proven to be relatively straightforward.</p><p>Remote deployment seemed a bit trickier at first, for Google play music authentication is typically
handled via oauth browser authentication. Thanks to the help of <a href=https://www.simonmweber.com/>Simon
Weber</a> I was able to make it run on Google Cloud Functions. This has
actually been a surprisingly seamless and pleasant experience. Details regarding the authentication
can be found in the <a href=https://github.com/kklein/gmusic-bot>project repo</a>.</p><p>Update 21/01/02: I updated the bot to rely on YouTube music instead of Google Play music.</p></section><section><footer class=page-footer><hr><ul class=page-footer-menu></ul><div class=copyright><p>&copy; 2022
.
All rights reserved.</p></div></footer></section></article></div></body></html>